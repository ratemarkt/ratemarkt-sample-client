{% extends "templates/base.html" %}
{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="page-header">
            <h1>Search Destination</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <form method="post" action="" class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_destination_code">Destination:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="destination_code" value="928b37" id="inp_destination_code" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_pax">Pax:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="pax" value="2" id="inp_pax" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_checkin">Checkin:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="checkin" value="2017-06-12" id="inp_checkin" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_checkout">Checkout:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="checkout" value="2017-06-15" id="inp_checkout" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_currency">Currency:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="currency" value="USD" id="inp_currency" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label" for="inp_nationality">Nationality:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="nationality" value="US" id="inp_nationality" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-primary">Search Hotels</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-md-8">
        {% for hotel in result.hotels %}
            <div class="panel panel-default">

                <div class="panel-body">
                    <div class="media">
                        <div class="media-left">
                            <a href="#"> <img alt="64x64" class="media-object" data-src="holder.js/64x64" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNWJjODcyZWVjNyB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE1YmM4NzJlZWM3Ij48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMy40Njg3NSIgeT0iMzYuNSI+NjR4NjQ8L3RleHQ+PC9nPjwvZz48L3N2Zz4=" data-holder-rendered="true" style="width: 64px; height: 64px;"> </a>
                        </div>
                        <div class="media-body">
                            <h4 class="media-heading"><a href="/checkhotel?hotel_code={{ hotel.hotelCode }}&checkin={{ checkin }}&checkout={{ checkout }}&nationality={{ nationality }}&currency={{ currency }}&pax={{ pax }}&">{{ hotel.hotelName }} <small style="text-transform: capitalize"> {{ hotel.destinationName }} </small></a></h4>
                            <span class="glyphicon glyphicon-bed" aria-hidden="true"></span>
                            88 Colin P. Kelly Street, San Francisco, CA 94107.
                        </div>
                    </div>
                </div>
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Room Description</th>
                            <th>Board Name</th>
                            <th>Nonrefundable</th>
                            <th>Rate Type</th>
                            <th>Rate</th>
                            <th>Cancellation Policy</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for rate in hotel.rates %}
                        <tr>
                            <td>{% for room in rate.rooms %} {{ room.roomDescription }} {% endfor %}</td>
                            <td>{{ rate.boardName }}</td>
                            <td>{{ rate.nonrefundable }}</td>
                            <td>{{ rate.rateType }}</td>
                            <td>{{ rate.rate }} {{ rate.currency }}</td>
                            <td>
                                {% if rate.cancellationPolicies %}
                                <button type="button" class="btn btn-xs btn-default" data-toggle="modal" data-target=".cp_modal_{{ hotel.hotelCode }}_{{ loop.index }}">Show Policies</button>
                                <div class="modal fade cp_modal_{{ hotel.hotelCode }}_{{ loop.index }}" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
                                    <div class="modal-dialog modal-sm" role="document">
                                        <div class="modal-content">
                                            <ul class="list-group">
                                            {% for policy in rate.cancellationPolicies %}
                                                <li class="list-group-item">Penalty: {{ policy.amount }} {{ rate.currency }}, From Date: {{ policy.fromDate }}</li>
                                            {% endfor %}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endfor %}
        </div>
    </div>
</div>

{% endblock %}